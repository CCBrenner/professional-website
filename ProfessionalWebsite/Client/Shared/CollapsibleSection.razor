
<div class="collapsible-section-header" @onclick="ToggleSection">
    <span class="@IconClasses" aria-hidden="true"></span>
    @ParentButtonText
    <div class="chevron-container">
        <i class="fa fa-chevron-left" style="display: @ChevronLeftDisplay" />
        <i class="fa fa-chevron-down" style="display: @ChevronDownDisplay" />
    </div>
</div>

<div style="display: @SectionDisplay">
    @ChildContent
</div>

@code {
    protected override void OnInitialized()
    {
        if (!ThisCanCollapse)
        {
            ChevronLeftDisplay = "none";
            SectionDisplay = "block";
        }
    }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    [Parameter]
    public string IconClasses { get; set; }
    [Parameter]
    public string ParentButtonText { get; set; }
    [Parameter]
    public string DoesItCollapse { get; set; } = "yes";

    public string ChevronLeftDisplay = "block";
    public string ChevronDownDisplay = "none";
    public string SectionDisplay = "none";

    public bool ThisCanCollapse => DoesItCollapse.ToLower() == "yes";

    public void ToggleSection()
    {
        if (!ThisCanCollapse) { }
        else if (ChevronLeftDisplay == "block")
        {
            ChevronLeftDisplay = "none";
            ChevronDownDisplay = "block";
            SectionDisplay = "block";
        }
        else
        {
            ChevronLeftDisplay = "block";
            ChevronDownDisplay = "none";
            SectionDisplay = "none";
        }
    }
}
